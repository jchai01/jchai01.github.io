<!doctype html><html lang=en><head><title>Arch Install Reference/Guide · Home
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Joseph Chai"><meta name=description content="This guide provides in-detail instructions for steps in Arch installation, a reference for myself.
Pre-requisites:
disable CSM in bios to prevent errors on GRUB installation. Patitioning Disk with Fdisk Link to heading Selecting the disk Link to heading Use sudo fdisk -l or lsblk to list the disk in your computer (lsblk gives less details). Select the appropriate disk to operate on with sudo fdisk /dev/sda (be sure to double check the correct disk is selected as it will be wiped)."><meta name=keywords content="blog,developer,personal"><meta name=fediverse:creator content><meta name=twitter:card content="summary"><meta name=twitter:title content="Arch Install Reference/Guide"><meta name=twitter:description content="This guide provides in-detail instructions for steps in Arch installation, a reference for myself.
Pre-requisites:
disable CSM in bios to prevent errors on GRUB installation. Patitioning Disk with Fdisk Link to heading Selecting the disk Link to heading Use sudo fdisk -l or lsblk to list the disk in your computer (lsblk gives less details). Select the appropriate disk to operate on with sudo fdisk /dev/sda (be sure to double check the correct disk is selected as it will be wiped)."><meta property="og:url" content="https://jchai01.github.io/posts/arch-installation-ref/"><meta property="og:site_name" content="Home"><meta property="og:title" content="Arch Install Reference/Guide"><meta property="og:description" content="This guide provides in-detail instructions for steps in Arch installation, a reference for myself.
Pre-requisites:
disable CSM in bios to prevent errors on GRUB installation. Patitioning Disk with Fdisk Link to heading Selecting the disk Link to heading Use sudo fdisk -l or lsblk to list the disk in your computer (lsblk gives less details). Select the appropriate disk to operate on with sudo fdisk /dev/sda (be sure to double check the correct disk is selected as it will be wiped)."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-10-21T22:57:46+01:00"><meta property="article:modified_time" content="2024-10-21T22:57:46+01:00"><meta property="article:tag" content="Linux"><link rel=canonical href=https://jchai01.github.io/posts/arch-installation-ref/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.07092c1350ffd254998dc43a44ae96e617d14af4df4602626878df89189c5e1a.css integrity="sha256-BwksE1D/0lSZjcQ6RK6W5hfRSvTfRgJiaHjfiRicXho=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><head></head><nav class=navigation><section class=container><a class=navigation-title href=https://jchai01.github.io/>Home
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/projects/>Projects</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://jchai01.github.io/posts/arch-installation-ref/>Arch Install Reference/Guide</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2024-10-21T22:57:46+01:00>October 21, 2024
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
3-minute read</span></div><div class=categories><i class="fa-solid fa-folder" aria-hidden=true></i>
<a href=/categories/guide/>Guide</a></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/linux/>Linux</a></span></div></div></header><div class=post-content><p>This guide provides in-detail instructions for steps in Arch installation, a reference for myself.</p><p>Pre-requisites:</p><ul><li>disable CSM in bios to prevent errors on GRUB installation.</li></ul><h2 id=patitioning-disk-with-fdisk>Patitioning Disk with Fdisk
<a class=heading-link href=#patitioning-disk-with-fdisk><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><h3 id=selecting-the-disk>Selecting the disk
<a class=heading-link href=#selecting-the-disk><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li>Use <code>sudo fdisk -l</code> or <code>lsblk</code> to list the disk in your computer (<code>lsblk</code> gives less details).</li><li>Select the appropriate disk to operate on with <code>sudo fdisk /dev/sda</code> (be sure to double check the correct disk is selected as it will be wiped).</li></ul><h3 id=create-partitions>Create partitions
<a class=heading-link href=#create-partitions><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li>boot, root and swap (optional) partition.</li><li>For each partition, we need to set a <strong>partition type</strong> and <strong>file system format</strong> (Partition type will be set first with fdisk).</li><li>Partition type: Linux Filesystem, EFI System, Linux Swap</li><li>File system type: FAT32, NTFS, VFAT etc.</li></ul><table><thead><tr><th>Partition</th><th>Partition Type</th><th>File System Format</th></tr></thead><tbody><tr><td>boot</td><td>EFI System</td><td>FAT32</td></tr><tr><td>swap(optional)</td><td>Linux Swap</td><td>No file system format</td></tr><tr><td>root</td><td>Linux Filesystem</td><td>ext4</td></tr></tbody></table><p><code>g</code> to create a GPT label (for UEFI system), <code>o</code> for DOS/MBR partition (legacy BIOS)
both of these clears the drive of any previous partitions and starts from clean slate.</p><h4 id=boot-partition>Boot partition
<a class=heading-link href=#boot-partition><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><code>n</code> to create a new partition.</li><li>Hit enter on the first sector, for the last sector: <code>+1G</code> to give it 1GB of space.</li><li>After creating, <code>t</code> to set the type, <code>ef</code> to set the type EFI partition.</li><li><code>+512M</code> for e.g. to allocate 512MB of space.</li><li>Best to allocate 1GB of space for boot partition as recommended by Arch wiki (encountered an issue trying to install NVIDIA proprietary driver, turns out the boot partition ran out of space).</li></ul><h4 id=swap-partition-optional>Swap partition (Optional)
<a class=heading-link href=#swap-partition-optional><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><code>n</code>. <code>+4G</code>. (example for 4GB)</li><li><code>t</code>, Change the value to 82 (Double check, value for Linux swap might change).</li></ul><h4 id=root-partition>Root partition
<a class=heading-link href=#root-partition><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><code>n</code>. Press enter multiple times to use the default value (the rest of the disk space).</li></ul><p>Once everything is done, <code>w</code> to permanently write.</p><h3 id=formatting-and-setting-filesystem-type>Formatting and Setting Filesystem Type
<a class=heading-link href=#formatting-and-setting-filesystem-type><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>use <code>lsblk</code> to ensure you are formatting the correct partition (sda1/sda2 etc&mldr;)</p><h4 id=fat32-for-boot-partition>FAT32 for boot partition:
<a class=heading-link href=#fat32-for-boot-partition><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><p><code>mkfs.fat -F32 /dev/sda1</code></p><h4 id=ext4-for-root-partition>EXT4 for root partition:
<a class=heading-link href=#ext4-for-root-partition><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><p><code>mkfs.ext4 /dev/root_partition</code></p><h4 id=enable-swap-partition>Enable Swap partition
<a class=heading-link href=#enable-swap-partition><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><p>Swap: for example sda2 is for swap.
<code>mkswap /dev/sda2</code>
<code>swapon /dev/sda2</code></p><h3 id=mounting--installing>Mounting & Installing
<a class=heading-link href=#mounting--installing><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li>Mount root partition on <code>/mnt</code>: <code>mount /dev/sda3 /mnt</code></li><li>Install Linux: <code>pacstrap -K /mnt base linux linux-firmware sudo vi</code>
<code>-K</code> is to create an empty keyring.</li><li>Generate filesystem table: <code>genfstab -U /mnt >> /mnt/etc/fstab</code></li><li><code>arch-chroot /mnt</code> to go into the installed system.</li></ul><h2 id=grub-installation>Grub Installation
<a class=heading-link href=#grub-installation><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><code>pacman -S grub efibootmgr</code></li><li><code>mkdir /boot/efi</code></li><li><code>mount /dev/efi-partition /boot/efi</code></li><li><code>grub-install --target=x86_64-efi --bootloader-id=grub_uefi --recheck</code></li><li><code>grub-mkconfig -o /boot/grub/grub.cfg</code></li></ul><p>ref: <a href=https://gist.github.com/chriscandy/16899e0d701a05654cb4f79ef2d2d062 class=external-link target=_blank rel=noopener>https://gist.github.com/chriscandy/16899e0d701a05654cb4f79ef2d2d062</a></p><h2 id=creating-user>Creating User
<a class=heading-link href=#creating-user><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><code>passwd</code> to set a root password, the default root password is an invalid one.</li><li><code>useradd -m -G wheel -s /bin/bash username</code></li><li>edit the visudo file to allow users in wheel group to use sudo: <code>sudo visudo</code> (uncomment the appropriate lines)</li><li>adding <code>-s /bin/bash</code> resolved an issue where the password entered is always incorrect when trying to login.</li><li><code>passwd username</code> to set a password.</li></ul><h2 id=installing-xfce4-desktop-environment>Installing XFCE4 Desktop Environment
<a class=heading-link href=#installing-xfce4-desktop-environment><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>xfce4 installation: <code>sudo pacman -S xfce4 xfce4-goodies networkmanager lightdm lightdm-gtk-greeter</code>
Enable services: <code>systemctl enable lightdm</code> & <code>systemctl enable NetworkManager</code></p><h2 id=gpu-driver-installation>GPU Driver installation
<a class=heading-link href=#gpu-driver-installation><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li>for certain nvidia card, running: <code>sudo pacman -S nvidia-open nvidia-utils nvidia-settings</code> and rebooting the pc should work.</li><li>otherwise, refer to the full guide: <a href=https://github.com/korvahannu/arch-nvidia-drivers-installation-guide class=external-link target=_blank rel=noopener>https://github.com/korvahannu/arch-nvidia-drivers-installation-guide</a></li><li>check if nvidia driver is installed with <code>nvidia-smi</code>.</li></ul><h2 id=others>Others
<a class=heading-link href=#others><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><code>ctrl-alt-f2</code> to enter terminal if stuck at booting.</li><li>If accidentally logout from installation medium, default password is <code>root</code>.</li></ul><h2 id=post-installation>Post Installation
<a class=heading-link href=#post-installation><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=/posts/arch-xfce-changes>My Arch XFCE changes</a></li></ul><h2 id=ref>Ref
<a class=heading-link href=#ref><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://wiki.archlinux.org/title/Installation_guide class=external-link target=_blank rel=noopener>https://wiki.archlinux.org/title/Installation_guide</a></li></ul></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2019 -
2024
Joseph Chai
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script data-goatcounter=https://jchai01.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>